<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Herramientas de Monitoreo y Registro :: Guía de Usuario de IoTDB</title>
    <link rel="canonical" href="https://aumandaris.github.io/ceos-guia-de-usuario-de-iotdb/ceos-guia-de-usuario-de-iotdb/0.12.x/index.html/ceos-guia-de-usuario-de-iotdb/0.12.x/herramientas-del-sistema/herramientas-de-monitoreo-y-registro.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://aumandaris.github.io/ceos-guia-de-usuario-de-iotdb/ceos-guia-de-usuario-de-iotdb/0.12.x/index.html">
        <img src="/ceos-guia-de-usuario-de-iotdb/ceos-guia-de-usuario-de-iotdb/0.12.x/_images/ceos-logo.png" width="40">
        <span>Guía de Usuario de IoTDB<span>     
      </a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ceos-guia-de-usuario-de-iotdb" data-version="0.12.x">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Guía de Usuario de IoTDB</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introducción a IoTDB</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduccion-a-iotdb/que-es-iotdb.html">Qué es IoTDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduccion-a-iotdb/arquitectura.html">Arquitectura</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#introduccion-a-iotdb/escenario.adoc">Escenarios</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduccion-a-iotdb/caracteristicas.html">Características</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduccion-a-iotdb/publicacion.html">Publicación</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Inicio Rápido</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../inicio-rapido/inicio-rapido.html">Inicio Rápido</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../inicio-rapido/configuracion-de-ruta-de-almacenamiento.html">Configuración de Ruta de Almacenamiento</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../inicio-rapido/obtener-archivos-binarios-de-iotdb.html">Obtener Archivos Binarios de IoTDB</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Concepto de Datos</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepto-de-datos/modelo-de-datos-y-terminologia.html">Modelo de Datos y Terminología</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepto-de-datos/tipo-de-datos.html">Tipo de Datos</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepto-de-datos/codificacion.html">Codificación</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepto-de-datos/compresion.html">Compresión</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepto-de-datos/sdt.html">SDT</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Interfaz de Línea de Comandos</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../interfaz-de-linea-de-comandos/interfaz-de-linea-de-comandos.html">Interfaz de Línea de Comandos</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Gestión de la Administración</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../gestion-de-la-administracion/administracion.html">Administración</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lenguaje IoTDB-SQL</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../lenguaje-iotdb-sql/ddl-lenguaje-de-definicion-de-datos.html">DDL (Lenguaje de Definición de Datos)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../lenguaje-iotdb-sql/dml-lenguaje-de-manipulacion-de-datos.html">DML (Lenguaje de Manipulación de Datos)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../lenguaje-iotdb-sql/comando-de-mantenimiento.html">Comando de Mantenimiento</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">API (Interfaz de Programación de Aplicaciones)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api-interfaz-de-programacion-de-aplicaciones/jdbc.html">JDBC</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api-interfaz-de-programacion-de-aplicaciones/api-nativa.html">API Nativa</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api-interfaz-de-programacion-de-aplicaciones/otros-lenguajes.html">Otros Lenguajes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api-interfaz-de-programacion-de-aplicaciones/api-tsfile.html">API TsFile</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">UDF (Función Definida por el Usuario)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../udf-funcion-definida-por-el-usuario/udf-funcion-definida-por-el-usuario.html">Función Definida por el Usuario</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Protocolo de Servicio de Comunicación</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../protocolo-de-servicio-de-comunicacion/thrift.html">Thrift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../protocolo-de-servicio-de-comunicacion/mqtt.html">MQTT</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Herramientas del Sistema</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cargar-herramienta-tsfile-externa.html">Cargar Archivo Ts Externo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="herramienta-de-seguimiento-del-rendimiento.html">Herramienta de Seguimiento del Rendimiento</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="herramienta-csv.html">Herramienta CSV</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="herramientas-de-monitoreo-y-registro.html">Herramientas de Monitorep y Registro</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="herramienta-jmx.html">Herramienta JMX</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="herramienta-mlogparser.html">Herramienta MLogParser</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="herramienta-node.html">Herramienta Node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="herramienta-de-visualizacion-del-historial-de-consultas.html">Herramienta de Visualización del Historial de Consultas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="herramienta-de-marca-de-agua.html">Herramienta de Marca de Agua</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Colaboración de Edge y Cloud</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../colaboracion-de-edge-y-cloud/herramienta-de-sincronizacion.html">Herramienta de Sincronización</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integración de Ecosistemas</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integracion-de-ecosistemas/grafana.html">Grafana</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Preguntas Frecuentes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../preguntas-frecuentes/preguntas-frecuentes.html">Preguntas Frecuentes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Apéndice</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../apendice/manual-de-configuracion.html">Manual de Configuración</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../apendice/referencia-de-sql.html">Referencia SQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../apendice/codigos-de-estado.html">Códigos de Estado</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Guía de Usuario de IoTDB</span>
    <span class="version">0.12.x</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Guía de Usuario de IoTDB</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">0.12.x</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Guía de Usuario de IoTDB</a></li>
    <li>Herramientas del Sistema</li>
    <li><a href="herramientas-de-monitoreo-y-registro.html">Herramientas de Monitorep y Registro</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/Aumandaris/ceos-guia-de-usuario-de-iotdb/edit/master/modules/ROOT/pages/herramientas-del-sistema/herramientas-de-monitoreo-y-registro.adoc">Editar esta página</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Herramientas de Monitoreo y Registro</h1>
<div class="sect1">
<h2 id="_monitor_del_sistema"><a class="anchor" href="#_monitor_del_sistema"></a>Monitor del Sistema</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Actualmente, IoTDB proporciona a los usuarios la herramienta JConsole de Java para monitorear el estado del sistema o usar la API abierta de IoTDB para verificar el estado de los datos.</p>
</div>
<div class="sect2">
<h3 id="_monitoreo_del_estado_del_sistema"><a class="anchor" href="#_monitoreo_del_estado_del_sistema"></a>Monitoreo del Estado del Sistema</h3>
<div class="paragraph">
<p>Después de iniciar la herramienta JConsole y conectarse al servidor IoTDB, se proporciona una visión básica del estado del sistema IoTDB (ocupación de CPU, información en memoria, etc.). Ver [documentación oficial] para obtener más información.</p>
</div>
</div>
<div class="sect2">
<h3 id="_monitoreo_de_mbean_jmx"><a class="anchor" href="#_monitoreo_de_mbean_jmx"></a>Monitoreo de MBean JMX</h3>
<div class="paragraph">
<p>Al utilizar la herramienta JConsole y conectarse con JMX, se le proporcionan algunas estadísticas y parámetros del sistema.</p>
</div>
<div class="paragraph">
<p>Esta sección describe cómo usar la pestaña JConsole <code>Mbean</code> de JConsole para monitorear algunas configuraciones del sistema de IoTDB, las estadísticas de escritura, etc. Después de conectarse a JMX, puede encontrar el "MBean" de "org.apache.iotdb.service", como se muestra en la imágen siguiente.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/imagen-15.png" alt="imagen 15">
</div>
</div>
<div class="paragraph">
<p>Hay varios atributos bajo supervisión, incluido el directorio de archivos de datos, las estadísticas de escritura y los valores de algunos parámetros del sistema. También puede mostrar un gráfico de líneas de la propiedad haciendo doble clic en el valor correspondiente a la propiedad. Para obtener una descripción detallada de los atributos del monitor, consulte las siguientes secciones.</p>
</div>
<div class="sect3">
<h4 id="_lista_de_atributos_de_mbean_monitor"><a class="anchor" href="#_lista_de_atributos_de_mbean_monitor"></a>Lista de Atributos de MBean Monitor</h4>
<div class="ulist">
<ul>
<li>
<p>SystemDirectory</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nombre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SystemDirectory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descripción</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El directorio absoluto del archivo del sistema de datos.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tipo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cadena</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>DataSizeInByte</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nombre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DataSizeInByte</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descripción</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El tamaño total del archivo de datos.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tipo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Largo</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>EnableStatMonitor</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nombre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EnableStatMonitor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descripción</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Si el módulo del monitor está abierto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tipo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Booleano</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_monitoreo_de_datos"><a class="anchor" href="#_monitoreo_de_datos"></a>Monitoreo de Datos</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Este módulo es para proporcionar información estadística sobre las operaciones de escritura:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>el tamaño de los datos (en bytes) en IoTDB, el número de puntos de datos en IoTDB;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>*cuántas operaciones se han ejecutado correctamente o no.</p>
</div>
<div class="sect2">
<h3 id="_activardesactivar_el_módulo"><a class="anchor" href="#_activardesactivar_el_módulo"></a>Activar/Desactivar el Módulo</h3>
<div class="paragraph">
<p>Los usuarios pueden optar por habilitar o deshabilitar la función de monitoreo de estadísticas de datos (establezca el elemento <code>enable_stat_monitor</code> en el archivo de configuración).</p>
</div>
</div>
<div class="sect2">
<h3 id="_almacenamiento_de_datos_estadísticos"><a class="anchor" href="#_almacenamiento_de_datos_estadísticos"></a>Almacenamiento de Datos Estadísticos</h3>
<div class="paragraph">
<p>De forma predeterminada, los datos estadísticos solo se guardan en la memoria y se puede acceder a ellos mediante Jconsole.</p>
</div>
<div class="paragraph">
<p>Los datos también se pueden escribir como series de tiempo en el disco. Para habilitarlo, configure <code>enable_monitor_series_write=true</code> en el archivo de configuración. Si es así, el uso de la declaración <code>select</code> en IoTDB-cli puede consultar estas series de tiempo.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Si <code>enable_monitor_series_write=true</code>, cuando se reinicia IoTDB, los datos estadísticos anteriores se recuperarán en la memoria. si <code>enable_monitor_series_write=false</code>, IoTDB olvidará todos los datos estadísticos después de reiniciar la instancia.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_monitor_de_datos_de_escritura"><a class="anchor" href="#_monitor_de_datos_de_escritura"></a>Monitor de Datos de Escritura</h3>
<div class="paragraph">
<p>En la actualidad, el sistema de supervisión se puede dividir en dos módulos: estadísticas de escritura global y estadísticas de escritura del grupo de almacenamiento. Las estadísticas globales registran el número total de puntos y solicitudes, y las estadísticas del grupo de almacenamiento cuentan los datos de escritura de cada grupo de almacenamiento.</p>
</div>
<div class="paragraph">
<p>El sistema establece la granularidad de recopilación del módulo de monitoreo para <strong>actualizar la información estadística una vez que un archivo de datos se descarga en el disco</strong>, por lo que la precisión de los datos puede ser diferente de la situación real. Para obtener información precisa, <strong>Por favor llame al método <code>flush</code> antes de consultar</strong>.</p>
</div>
<div class="paragraph">
<p>Aquí están las estadísticas de escritura de datos (el rango admitido se muestra entre paréntesis):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>TOTAL_POINTS (GLOBAL)</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nombre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TOTAL_POINTS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descripción</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Calcula el número total de puntos de escritura globales.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nombre de Serie Temporal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">root.stats.{"global"</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>TOTAL_REQ_SUCCESS (GLOBAL)</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nombre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TOTAL_REQ_SUCCESS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descripción</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Calcule el número de solicitudes exitosas globales.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nombre de Serie Temporal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">root.stats."global".TOTAL_REQ_SUCCESS</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>TOTAL_REQ_FAIL (GLOBAL)</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nombre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TOTAL_REQ_FAIL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descripción</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Calcule el número de solicitudes fallidas globales.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nombre de Serie Temporal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">root.stats."global".TOTAL_REQ_FAIL</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Los atributos anteriores también admiten la visualización en JConsole. Para la información estadística de cada grupo de almacenamiento, para evitar la confusión de visualización causada por demasiados grupos de almacenamiento, el usuario puede ingresar el nombre del grupo de almacenamiento en el método de operación bajo el monitor MBean para consultar la información estadística correspondiente.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/image-16.png" alt="image 16">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ejemplo"><a class="anchor" href="#_ejemplo"></a>Ejemplo</h3>
<div class="paragraph">
<p>Aquí damos algunos ejemplos de cómo escribir estadísticas de datos.</p>
</div>
<div class="paragraph">
<p>Para conocer el número total de puntos de escritura globales, use la cláusula <code>select</code> para consultar su valor. La declaración de consulta es:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-SQL hljs" data-lang="SQL">select TOTAL_POINTS from root.stats."global"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para conocer el número total de puntos de escritura globales de root.ln (grupo de almacenamiento), la declaración de consulta es:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-SQL hljs" data-lang="SQL">select TOTAL_POINTS from root.stats."root.ln"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para conocer las últimas estadísticas del sistema actual, puede utilizar la última consulta de datos. Aquí está la declaración de consulta:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-SQL hljs" data-lang="SQL">flush
select last TOTAL_POINTS from root.stats."global"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_monitor_de_rendimiento"><a class="anchor" href="#_monitor_de_rendimiento"></a>Monitor de Rendimiento</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introducción"><a class="anchor" href="#_introducción"></a>Introducción</h3>
<div class="paragraph">
<p>Para comprender el rendimiento de iotdb, se agrega este módulo para contar el tiempo de consumo de cada operación. Este módulo puede calcular las estadísticas del tiempo promedio de cada operación y la proporción de cada operación cuyo consumo de tiempo cae dentro de un rango de tiempo. La salida está en el archivo log_measure.log. A continuación se muestra un ejemplo de salida.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/imagen-17.png" alt="imagen 17">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_parámetro_de_configuración"><a class="anchor" href="#_parámetro_de_configuración"></a>Parámetro de Configuración</h3>
<div class="paragraph">
<p>ubicación: conf/iotdb-engine.properties</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Parámetro y Descripción</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parámetro</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valor Predeterminado</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descripción</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable_performance_stat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Es el rendimiento estadístico de la habilitación del submódulo.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">performance_stat_display_interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El intervalo de visualización del resultado estadístico en ms.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">performance_stat_memory_in_kb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La memoria utilizada para performance_stat en kb.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_jmx_mbean"><a class="anchor" href="#_jmx_mbean"></a>JMX MBean</h3>
<div class="paragraph">
<p>Conéctese a JConsole con el puerto 31999, y seleccione en la barra de menú <code>MBean</code>. Expanda la barra lateral y elija <code>org.apache.iotdb.db.cost.statistic</code>. Puede encontrar:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/imagen-18.png" alt="imagen 18">
</div>
</div>
<div class="sect3">
<h4 id="_atributo"><a class="anchor" href="#_atributo"></a>Atributo</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>EnableStat</code> ： Ya sea que las estadísticas estén habilitadas o no, si es cierto, el módulo registra el tiempo que consume cada operación e imprime los resultados; No es editable, pero se puede cambiar con la función siguiente.</p>
</li>
<li>
<p><code>DisplayIntervalInMs</code>: el intervalo entre los resultados de impresión. Los cambios no surtirán efecto instantáneamente. Para que los cambios sean efectivos, debe llamar a <code>startContinuousStatistics()</code> o <code>startOneTimeStatistics()</code>.</p>
</li>
<li>
<p><code>OperationSwitch</code> ： Es un mapa para indicar si las estadísticas de un tipo de operación deben ser calculadas, la clave es el nombre de la operación y el valor es verdadero significa que las estadísticas de la operación están habilitadas, de lo contrario deshabilitadas. Este parámetro no se puede cambiar directamente, se cambia mediante la operación &#8216;changeOperationSwitch()&#8217;.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_operación"><a class="anchor" href="#_operación"></a>Operación</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>startContinuousStatistics</code>: inicie las estadísticas y la salida en el intervalo de &#8220;DisplayIntervalInMs&#8221;.</p>
</li>
<li>
<p><code>startOneTimeStatistics</code>： Inicia las estadísticas y la salida con retraso de &#8220;DisplayIntervalInMs&#8221;.</p>
</li>
<li>
<p><code>stopStatistic</code> ： Detiene las estadísticas.</p>
</li>
<li>
<p><code>clearStatisticalState()</code>: borrar el resultado estadístico actual, restablecer el resultado estadístico.</p>
</li>
<li>
<p><code>changeOperationSwitch(String operationName, Boolean operationState)</code>: establece si se debe monitorear un tipo de operación. El parámetro &#8216;operationName&#8217; es el nombre de la operación, definido en el atributo <code>operationSwitch</code>. El parámetro <code>operationState</code> es si habilitar las estadísticas o no. Si el estado se cambia correctamente, la función devolverá verdadero; de lo contrario, devolverá falso.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adición_de_elementos_de_monitoreo_personalizados_para_contribuyentes_de_iotdb"><a class="anchor" href="#_adición_de_elementos_de_monitoreo_personalizados_para_contribuyentes_de_iotdb"></a>Adición de Elementos de Monitoreo Personalizados para Contribuyentes de IOTDB</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_agregar_operación"><a class="anchor" href="#_agregar_operación"></a>Agregar Operación</h3>
<div class="paragraph">
<p>Agregue una enumeración en <code>org.apache.iotdb.db.cost.statistic.Operation</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_agregar_código_de_tiempo_en_el_área_de_monitoreo"><a class="anchor" href="#_agregar_código_de_tiempo_en_el_área_de_monitoreo"></a>Agregar Código de Tiempo en el Área de Monitoreo</h3>
<div class="paragraph">
<p>Agregue el código de tiempo en el área de inicio de monitoreo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>long t0 = System. currentTimeMillis();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Agregue el código de tiempo en el área de parada de monitoreo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Measurement.INSTANCE.addOperationLatency(Operation, t0);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_estadísticas_de_proporción_de_aciertos_de_caché"><a class="anchor" href="#_estadísticas_de_proporción_de_aciertos_de_caché"></a>Estadísticas de Proporción de Aciertos de Caché</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_visión_general"><a class="anchor" href="#_visión_general"></a>Visión General</h3>
<div class="paragraph">
<p>Para mejorar el rendimiento de las consultas, IOTDB almacena en caché <code>ChunkMetaData</code> y <code>TsFileMetaData</code>. Los usuarios pueden ver la tasa de aciertos de caché a través del registro de nivel de depuración y MXBean, y ajustar la memoria ocupada por el caché de acuerdo con la tasa de aciertos de caché y la memoria del sistema. El método de usar MXBean para ver la proporción de aciertos de caché es el siguiente:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Conéctese a JConsole con el puerto <code>31999</code> y seleccione 'MBean' en el elemento de menú de arriba.</p>
</li>
<li>
<p>Expanda la barra lateral y seleccione &#8216;org.apache.iotdb.db.service&#8217;. Obtendrá los resultados que se muestran en la siguiente figura:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/imagen-19.png" alt="imagen 19">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_registro_del_sistema"><a class="anchor" href="#_registro_del_sistema"></a>Registro del Sistema</h2>
<div class="sectionbody">
<div class="paragraph">
<p>IoTDB permite a los usuarios configurar los registros del sistema de IoTDB (como el nivel de salida del registro) modificando el archivo de configuración del registro. La ubicación predeterminada del archivo de configuración de registro del sistema está en la carpeta <code>$IOTDB_HOME/conf</code>.</p>
</div>
<div class="paragraph">
<p>El archivo de configuración de registro predeterminado se denomina <code>logback.xml</code>. El usuario puede modificar la configuración del registro de ejecución del sistema agregando o cambiando los parámetros del nodo del árbol xml. Cabe señalar que la configuración del registro del sistema mediante el archivo de configuración del registro no tiene efecto inmediatamente después de la modificación, sino que tendrá efecto después de reiniciar el sistema. El uso de <code>logback.xml</code> es el habitual.</p>
</div>
<div class="paragraph">
<p>Al mismo tiempo, para facilitar la depuración del sistema por parte de los desarrolladores y DBA, proporcionamos varias interfaces JMX para modificar dinámicamente la configuración del registro y configurar el módulo de registro del sistema en tiempo real sin reiniciar el sistema.</p>
</div>
<div class="sect2">
<h3 id="_configuración_de_registro_dinámico_del_sistema"><a class="anchor" href="#_configuración_de_registro_dinámico_del_sistema"></a>Configuración de Registro Dinámico del Sistema</h3>
<div class="sect3">
<h4 id="_conectar_jmx"><a class="anchor" href="#_conectar_jmx"></a>Conectar JMX</h4>
<div class="paragraph">
<p>Aquí usamos JConsole para conectarnos con JMX.</p>
</div>
<div class="paragraph">
<p>Inicie JConsole, establezca una nueva conexión JMX con el servidor IoTDB (puede seleccionar el proceso local o ingresar la IP y el PUERTO para la conexión remota, el puerto de operación predeterminado del servicio IoTDB JMX es <code>31999</code>). La figura 4.1 muestra la GUI de conexión de JConsole.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/imagen-20.png" alt="imagen 20">
</div>
<div class="title">Figure 1. Figura 4.1</div>
</div>
<div class="paragraph">
<p>Después de conectarse, haga clic en <code>MBean</code> y busque <code>ch.qos.logback.classic.default.ch.qos.logback.classic.jmx.JMXConfigurator</code> (como se muestra en la figura 4.2).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/imagen-21.png" alt="imagen 21">
</div>
<div class="title">Figure 2. Figura 4.2</div>
</div>
<div class="paragraph">
<p>En la ventana JMXConfigurator, se proporcionan 6 operaciones, como se muestra en la figura 4.3. Puede utilizar estas interfaces para realizar la operación.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/imagen-22.png" alt="imagen 22">
</div>
<div class="title">Figure 3. Figura 4.3</div>
</div>
</div>
<div class="sect3">
<h4 id="_instrucción_de_interfaz"><a class="anchor" href="#_instrucción_de_interfaz"></a>Instrucción de Interfaz</h4>
<div class="ulist">
<ul>
<li>
<p>reloadDefaultConfiguration</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Este método consiste en volver a cargar el archivo de configuración de logback predeterminado. El usuario puede modificar primero el archivo de configuración predeterminado y luego llamar a este método para volver a cargar el archivo de configuración modificado en el sistema para que surta efecto.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>reloadByFileName</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Este método carga un archivo de configuración de logback con la ruta y el nombre especificados, y luego lo hace efectivo. Este método acepta un parámetro de tipo String llamado p1, que es la ruta al archivo de configuración que debe especificarse para cargar.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>getLoggerEffectiveLevel</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Este método es para obtener el nivel de registro actual del registrador especificado. Este método acepta un parámetro de tipo String llamado p1, que es el nombre del registrador especificado. Este método devuelve el nivel de registro actualmente en vigor para el registrador especificado.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>getLoggerLevel</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Este método es para obtener el nivel de registro del registrador especificado. Este método acepta un parámetro de tipo String llamado p1, que es el nombre del registrador especificado. Este método devuelve el nivel de registro del registrador especificado. Cabe señalar que la diferencia entre este método y el método <code>getLoggerEffectiveLevel</code> es que el método devuelve el nivel de registro que el registrador especificado está configurado en el archivo de configuración. Si el usuario no establece el nivel de registro para el registrador, regrese vacío. Según el mecanismo de herencia de nivel de registro de Logger, el nivel de Logger no se establece explícitamente, heredará la configuración del nivel de registro de su antepasado más cercano. En este punto, llamar al método <code>getLoggerEffectiveLevel</code> devolverá el nivel de registro en el que el registrador está en vigor; llamar a <code>getLoggerLevel</code> devolverá un valor nulo.</p>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Esta página fue hecha usando la interfaz predeterminada de Antora.</p>
  <p>El código de esta interfaz está licenciado bajo los términos de la licencia MPL-2.0.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lenguaje de Definición de Datos (DDL) :: Guía de Usuario de IoTDB</title>
    <link rel="canonical" href="https://aumandaris.github.io/ceos-guia-de-usuario-de-iotdb/ceos-guia-de-usuario-de-iotdb/0.12.x/index.html/ceos-guia-de-usuario-de-iotdb/0.12.x/lenguaje-iotdb-sql/ddl-lenguaje-de-definicion-de-datos.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://aumandaris.github.io/ceos-guia-de-usuario-de-iotdb/ceos-guia-de-usuario-de-iotdb/0.12.x/index.html">
        <img src="/ceos-guia-de-usuario-de-iotdb/ceos-guia-de-usuario-de-iotdb/0.12.x/_images/ceos-logo.png" width="40">
        <span>Guía de Usuario de IoTDB<span>     
      </a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ceos-guia-de-usuario-de-iotdb" data-version="0.12.x">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Guía de Usuario de IoTDB</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introducción a IoTDB</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduccion-a-iotdb/que-es-iotdb.html">Qué es IoTDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduccion-a-iotdb/arquitectura.html">Arquitectura</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#introduccion-a-iotdb/escenario.adoc">Escenarios</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduccion-a-iotdb/caracteristicas.html">Características</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduccion-a-iotdb/publicacion.html">Publicación</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Inicio Rápido</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../inicio-rapido/inicio-rapido.html">Inicio Rápido</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../inicio-rapido/configuracion-de-ruta-de-almacenamiento.html">Configuración de Ruta de Almacenamiento</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../inicio-rapido/obtener-archivos-binarios-de-iotdb.html">Obtener Archivos Binarios de IoTDB</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Concepto de Datos</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepto-de-datos/modelo-de-datos-y-terminologia.html">Modelo de Datos y Terminología</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepto-de-datos/tipo-de-datos.html">Tipo de Datos</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepto-de-datos/codificacion.html">Codificación</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepto-de-datos/compresion.html">Compresión</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepto-de-datos/sdt.html">SDT</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Interfaz de Línea de Comandos</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../interfaz-de-linea-de-comandos/interfaz-de-linea-de-comandos.html">Interfaz de Línea de Comandos</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Gestión de la Administración</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../gestion-de-la-administracion/administracion.html">Administración</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lenguaje IoTDB-SQL</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="ddl-lenguaje-de-definicion-de-datos.html">DDL (Lenguaje de Definición de Datos)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dml-lenguaje-de-manipulacion-de-datos.html">DML (Lenguaje de Manipulación de Datos)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="comando-de-mantenimiento.html">Comando de Mantenimiento</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">API (Interfaz de Programación de Aplicaciones)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api-interfaz-de-programacion-de-aplicaciones/jdbc.html">JDBC</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api-interfaz-de-programacion-de-aplicaciones/api-nativa.html">API Nativa</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api-interfaz-de-programacion-de-aplicaciones/otros-lenguajes.html">Otros Lenguajes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api-interfaz-de-programacion-de-aplicaciones/api-tsfile.html">API TsFile</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Guía de Usuario de IoTDB</span>
    <span class="version">0.12.x</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Guía de Usuario de IoTDB</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">0.12.x</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Guía de Usuario de IoTDB</a></li>
    <li>Lenguaje IoTDB-SQL</li>
    <li><a href="ddl-lenguaje-de-definicion-de-datos.html">DDL (Lenguaje de Definición de Datos)</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/Aumandaris/ceos-guia-de-usuario-de-iotdb/edit/master/modules/ROOT/pages/lenguaje-iotdb-sql/ddl-lenguaje-de-definicion-de-datos.adoc">Editar esta página</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Lenguaje de Definición de Datos (DDL)</h1>
<div class="sect1">
<h2 id="_gestión_de_grupos_de_almacenamiento"><a class="anchor" href="#_gestión_de_grupos_de_almacenamiento"></a>Gestión de Grupos de Almacenamiento</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_crear_grupo_de_almacenamiento"><a class="anchor" href="#_crear_grupo_de_almacenamiento"></a>Crear Grupo de Almacenamiento</h3>
<div class="paragraph">
<p>Según el modelo de almacenamiento podemos configurar el grupo de almacenamiento correspondiente. Las sentencias SQL para crear grupos de almacenamiento son las siguientes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB &gt; set storage group to root.ln
IoTDB &gt; set storage group to root.sgcc</code></pre>
</div>
</div>
<div class="paragraph">
<p>Por tanto, podemos crear dos grupos de almacenamiento utilizando las dos sentencias SQL anteriores.</p>
</div>
<div class="paragraph">
<p>Vale la pena señalar que cuando la ruta en sí o la capa principal/secundaria de la ruta ya está configurada como un grupo de almacenamiento, la ruta no puede configurarse como un grupo de almacenamiento. Por ejemplo, no es factible establecer <code>root.ln.wf01</code> como un grupo de almacenamiento cuando existen dos grupos de almacenamiento <code>root.ln</code> y <code>root.sgcc</code>. El sistema muestra el mensaje de error correspondiente como se muestra a continuación:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB&gt; set storage group to root.ln.wf01
Msg: 300: root.ln has already been set to storage group.</code></pre>
</div>
</div>
<div class="paragraph">
<p>El LayerName del grupo de almacenamiento solo puede ser caracteres, números, guiones bajos y guiones.</p>
</div>
<div class="paragraph">
<p>Además, si se implementa en un sistema Windows, LayerName no distingue entre mayúsculas y minúsculas, lo que significa que no está permitido configurar los grupos de almacenamiento <code>root.ln</code> y <code>root.LN</code> al mismo tiempo.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mostrar_grupo_de_almacenamiento"><a class="anchor" href="#_mostrar_grupo_de_almacenamiento"></a>Mostrar Grupo de Almacenamiento</h3>
<div class="paragraph">
<p>Después de crear el grupo de almacenamiento, podemos usar la instrucción [SHOW STORAGE GROUP] y [SHOW STORAGE GROUP &lt;PrefixPath&gt;] para ver los grupos de almacenamiento. Las declaraciones SQL son las siguientes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB&gt; show storage group
IoTDB&gt; show storage group root.ln</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>+-------------+
|storage group|
+-------------+
|    root.sgcc|
|      root.ln|
+-------------+
Total line number = 2
It costs 0.060s</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_eliminar_grupo_de_almacenamiento"><a class="anchor" href="#_eliminar_grupo_de_almacenamiento"></a>Eliminar Grupo de Almacenamiento</h3>
<div class="paragraph">
<p>El usuario puede utilizar la instrucción <code>DELETE STORAGE GROUP &lt;PrefixPath&gt;</code> para eliminar todos los grupos de almacenamiento bajo prefixPath. Tenga en cuenta que los datos del grupo de almacenamiento también se eliminarán.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB &gt; DELETE STORAGE GROUP root.ln
IoTDB &gt; DELETE STORAGE GROUP root.sgcc
// delete all data, all timeseries and all storage groups
IoTDB &gt; DELETE STORAGE GROUP root.*</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gestión_de_series_temporales"><a class="anchor" href="#_gestión_de_series_temporales"></a>Gestión de Series Temporales</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_crear_series_temporales"><a class="anchor" href="#_crear_series_temporales"></a>Crear Series Temporales</h3>
<div class="paragraph">
<p>De acuerdo con el modelo de almacenamiento seleccionado anteriormente, podemos crear series de tiempo correspondientes en los dos grupos de almacenamiento respectivamente. Las declaraciones SQL para crear series temporales son las siguientes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB &gt; create timeseries root.ln.wf01.wt01.status with datatype=BOOLEAN,encoding=PLAIN
IoTDB &gt; create timeseries root.ln.wf01.wt01.temperature with datatype=FLOAT,encoding=RLE
IoTDB &gt; create timeseries root.ln.wf02.wt02.hardware with datatype=TEXT,encoding=PLAIN
IoTDB &gt; create timeseries root.ln.wf02.wt02.status with datatype=BOOLEAN,encoding=PLAIN
IoTDB &gt; create timeseries root.sgcc.wf03.wt01.status with datatype=BOOLEAN,encoding=PLAIN
IoTDB &gt; create timeseries root.sgcc.wf03.wt01.temperature with datatype=FLOAT,encoding=RLE</code></pre>
</div>
</div>
<div class="paragraph">
<p>Observe que cuando en la declaración CREATE TIMESERIES el método de codificación entra en conflicto con el tipo de datos, el sistema muestra el mensaje de error correspondiente como se muestra a continuación:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB&gt; create timeseries root.ln.wf02.wt02.status WITH DATATYPE=BOOLEAN, ENCODING=TS_2DIFF
error: encoding TS_2DIFF does not support BOOLEAN</code></pre>
</div>
</div>
<div class="paragraph">
<p>Consulte [Codificación] para conocer la correspondencia entre el tipo de datos y la codificación.</p>
</div>
</div>
<div class="sect2">
<h3 id="_eliminar_series_temporales"><a class="anchor" href="#_eliminar_series_temporales"></a>Eliminar Series Temporales</h3>
<div class="paragraph">
<p>Para eliminar la serie temporal que creamos antes, podemos usar la instrucción <code>DELETE TimeSeries &lt;PrefixPath&gt;</code>.</p>
</div>
<div class="paragraph">
<p>El uso es el siguiente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB&gt; delete timeseries root.ln.wf01.wt01.status
IoTDB&gt; delete timeseries root.ln.wf01.wt01.temperature, root.ln.wf02.wt02.hardware
IoTDB&gt; delete timeseries root.ln.wf02.*</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mostrar_series_temporales"><a class="anchor" href="#_mostrar_series_temporales"></a>Mostrar Series Temporales</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SHOW LATEST? TIMESERIES prefixPath? showWhereClause? limitClause?</p>
<div class="paragraph">
<p>Hay cuatro cláusulas opcionales agregadas en SHOW TIMESERIES, devuelve información de series de tiempo</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>La información de la serie temporal incluye: ruta de la serie temporal, alias de medición, grupo de almacenamiento al que pertenece, tipo de datos, tipo de codificación, tipo de compresión, etiquetas y atributos.</p>
</div>
<div class="paragraph">
<p>Ejemplos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SHOW TIMESERIES</p>
<div class="paragraph">
<p>Presenta toda la información de la serie temporal en formato JSON.</p>
</div>
</li>
<li>
<p>SHOW TIMESERIES <code>&lt;Path&gt;</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Devuelve toda la información de la serie temporal en la <code>&lt;Path&gt;.&lt;Path&gt;</code> dada, debe ser una ruta de prefijo o una ruta con estrella o una ruta de serie temporal. Las declaraciones SQL son las siguientes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB&gt; show timeseries root
IoTDB&gt; show timeseries root.ln</code></pre>
</div>
</div>
<div class="paragraph">
<p>Los resultados se muestran a continuación respectivamente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+
|                     timeseries|   alias|storage group|dataType|encoding|compression|                                       tags|                                              attributes|
+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+
|root.sgcc.wf03.wt01.temperature|    null|    root.sgcc|   FLOAT|     RLE|     SNAPPY|                                       null|                                                    null|
|     root.sgcc.wf03.wt01.status|    null|    root.sgcc| BOOLEAN|   PLAIN|     SNAPPY|                                       null|                                                    null|
|             root.turbine.d1.s1|newAlias| root.turbine|   FLOAT|     RLE|     SNAPPY|{"newTag1":"newV1","tag4":"v4","tag3":"v3"}|{"attr2":"v2","attr1":"newV1","attr4":"v4","attr3":"v3"}|
|     root.ln.wf02.wt02.hardware|    null|      root.ln|    TEXT|   PLAIN|     SNAPPY|                                       null|                                                    null|
|       root.ln.wf02.wt02.status|    null|      root.ln| BOOLEAN|   PLAIN|     SNAPPY|                                       null|                                                    null|
|  root.ln.wf01.wt01.temperature|    null|      root.ln|   FLOAT|     RLE|     SNAPPY|                                       null|                                                    null|
|       root.ln.wf01.wt01.status|    null|      root.ln| BOOLEAN|   PLAIN|     SNAPPY|                                       null|                                                    null|
+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+
Total line number = 7
It costs 0.016s

+-----------------------------+-----+-------------+--------+--------+-----------+----+----------+
|                   timeseries|alias|storage group|dataType|encoding|compression|tags|attributes|
+-----------------------------+-----+-------------+--------+--------+-----------+----+----------+
|   root.ln.wf02.wt02.hardware| null|      root.ln|    TEXT|   PLAIN|     SNAPPY|null|      null|
|     root.ln.wf02.wt02.status| null|      root.ln| BOOLEAN|   PLAIN|     SNAPPY|null|      null|
|root.ln.wf01.wt01.temperature| null|      root.ln|   FLOAT|     RLE|     SNAPPY|null|      null|
|     root.ln.wf01.wt01.status| null|      root.ln| BOOLEAN|   PLAIN|     SNAPPY|null|      null|
+-----------------------------+-----+-------------+--------+--------+-----------+----+----------+
Total line number = 4
It costs 0.004s</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SHOW TIMESERIES (<code>&lt;PrefixPath&gt;</code>)? WhereClause</p>
<div class="paragraph">
<p>Devuelve toda la información de la serie temporal que satisface la condición where y comienza con el prefixPath Las sentencias SQL son las siguientes:</p>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>ALTER timeseries root.ln.wf02.wt02.hardware ADD TAGS unit=c
ALTER timeseries root.ln.wf02.wt02.status ADD TAGS description=test1
show timeseries root.ln where unit=c
show timeseries root.ln where description contains 'test1'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Los resultados se muestran a continuación respectivamente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>+--------------------------+-----+-------------+--------+--------+-----------+------------+----------+
|                timeseries|alias|storage group|dataType|encoding|compression|        tags|attributes|
+--------------------------+-----+-------------+--------+--------+-----------+------------+----------+
|root.ln.wf02.wt02.hardware| null|      root.ln|    TEXT|   PLAIN|     SNAPPY|{"unit":"c"}|      null|
+--------------------------+-----+-------------+--------+--------+-----------+------------+----------+
Total line number = 1
It costs 0.005s

+------------------------+-----+-------------+--------+--------+-----------+-----------------------+----------+
|              timeseries|alias|storage group|dataType|encoding|compression|                   tags|attributes|
+------------------------+-----+-------------+--------+--------+-----------+-----------------------+----------+
|root.ln.wf02.wt02.status| null|      root.ln| BOOLEAN|   PLAIN|     SNAPPY|{"description":"test1"}|      null|
+------------------------+-----+-------------+--------+--------+-----------+-----------------------+----------+
Total line number = 1
It costs 0.004s</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Tenga en cuenta que solo admitimos una condición en la cláusula where. O es un filtro igual o es un filtro <code>contains</code>. En ambos casos, la propiedad en la condición where debe ser una etiqueta.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SHOW TIMESERIES LIMIT INT OFFSET INT</p>
<div class="paragraph">
<p>Devuelve toda la información de la serie temporal a partir del desplazamiento y limita el número de series devueltas.</p>
</div>
</li>
<li>
<p>SHOW LATEST TIMESERIES</p>
<div class="paragraph">
<p>Toda la información de la serie temporal devuelta debe ordenarse en orden descendente según la última marca de tiempo de la serie temporal.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Vale la pena señalar que cuando la ruta consultada no existe, el sistema no devolverá series de tiempo.</p>
</div>
</div>
<div class="sect2">
<h3 id="_contar_series_temporales"><a class="anchor" href="#_contar_series_temporales"></a>Contar Series Temporales</h3>
<div class="paragraph">
<p>IoTDB puede utilizar <code>COUNT TIMESERIES &lt;Path&gt;</code> para contar el número de series temporales en la ruta. Las declaraciones SQL son las siguientes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB &gt; COUNT TIMESERIES root
IoTDB &gt; COUNT TIMESERIES root.ln
IoTDB &gt; COUNT TIMESERIES root.ln.*.*.status
IoTDB &gt; COUNT TIMESERIES root.ln.wf01.wt01.status</code></pre>
</div>
</div>
<div class="paragraph">
<p>Además, <code>LEVEL</code> podría definirse para mostrar el número de series de tiempo de cada nodo en el nivel dado en el árbol de metadatos actual. Esto podría usarse para consultar el número de sensores debajo de cada dispositivo. La gramática es: <code>COUNT TIMESERIES &lt;Path&gt; GROUP BY LEVEL = &lt;INTEGER&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Por ejemplo, si hay varias series temporales (use <code>show timeseries</code> para mostrar todas las series temporales):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+
|                     timeseries|   alias|storage group|dataType|encoding|compression|                                       tags|                                              attributes|
+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+
|root.sgcc.wf03.wt01.temperature|    null|    root.sgcc|   FLOAT|     RLE|     SNAPPY|                                       null|                                                    null|
|     root.sgcc.wf03.wt01.status|    null|    root.sgcc| BOOLEAN|   PLAIN|     SNAPPY|                                       null|                                                    null|
|             root.turbine.d1.s1|newAlias| root.turbine|   FLOAT|     RLE|     SNAPPY|{"newTag1":"newV1","tag4":"v4","tag3":"v3"}|{"attr2":"v2","attr1":"newV1","attr4":"v4","attr3":"v3"}|
|     root.ln.wf02.wt02.hardware|    null|      root.ln|    TEXT|   PLAIN|     SNAPPY|                               {"unit":"c"}|                                                    null|
|       root.ln.wf02.wt02.status|    null|      root.ln| BOOLEAN|   PLAIN|     SNAPPY|                    {"description":"test1"}|                                                    null|
|  root.ln.wf01.wt01.temperature|    null|      root.ln|   FLOAT|     RLE|     SNAPPY|                                       null|                                                    null|
|       root.ln.wf01.wt01.status|    null|      root.ln| BOOLEAN|   PLAIN|     SNAPPY|                                       null|                                                    null|
+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+
Total line number = 7
It costs 0.004s</code></pre>
</div>
</div>
<div class="paragraph">
<p>Entonces el árbol de metadatos será el siguiente:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/imagen-10.jpeg" alt="imagen 10">
</div>
</div>
<div class="paragraph">
<p>Como puede verse, <code>root</code> se considera como <code>LEVEL=0</code>. Entonces, cuando ingresa declaraciones como:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB &gt; COUNT TIMESERIES root GROUP BY LEVEL=1
IoTDB &gt; COUNT TIMESERIES root.ln GROUP BY LEVEL=2
IoTDB &gt; COUNT TIMESERIES root.ln.wf01 GROUP BY LEVEL=2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Obtendrá los siguientes resultados:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>+------------+-----+
|      column|count|
+------------+-----+
|   root.sgcc|    2|
|root.turbine|    1|
|     root.ln|    4|
+------------+-----+
Total line number = 3
It costs 0.002s

+------------+-----+
|      column|count|
+------------+-----+
|root.ln.wf02|    2|
|root.ln.wf01|    2|
+------------+-----+
Total line number = 2
It costs 0.002s

+------------+-----+
|      column|count|
+------------+-----+
|root.ln.wf01|    2|
+------------+-----+
Total line number = 1
It costs 0.002s</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>La ruta de las series temporales es solo una condición de filtro, que no tiene relación con la definición de nivel.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_gestión_de_etiquetas_y_atributos"><a class="anchor" href="#_gestión_de_etiquetas_y_atributos"></a>Gestión de Etiquetas y Atributos</h3>
<div class="paragraph">
<p>También podemos agregar un alias, etiqueta adicional e información de atributos mientras creamos una serie temporal. Las sentencias SQL para crear series temporales con información adicional de etiquetas y atributos se amplían de la siguiente manera:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>create timeseries root.turbine.d1.s1(temperature) with datatype=FLOAT, encoding=RLE, compression=SNAPPY tags(tag1=v1, tag2=v2) attributes(attr1=v1, attr2=v2)</code></pre>
</div>
</div>
<div class="paragraph">
<p>La <code>temperature</code> entre paréntesis es un alias del sensor <code>s1</code>. Entonces podemos usar <code>temperature</code> para reemplazar <code>s1</code> en cualquier lugar.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>IoTDB también admite el [uso de la función AS] para establecer un alias. La diferencia entre los dos es: el alias establecido por la función AS se usa para reemplazar el nombre completo de la serie de tiempo, temporal y no vinculado con la serie de tiempo; mientras que el alias mencionado anteriormente solo se usa como el alias del sensor, que está vinculado con él y se puede usar de manera equivalente al nombre del sensor original.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La única diferencia entre etiqueta y atributo es que mantendremos un índice invertido en la etiqueta, por lo que podemos usar la propiedad de etiqueta en la cláusula show timeseries where que puede ver en la siguiente sección <code>Show Timeseries</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Tenga en cuenta que el tamaño de la etiqueta adicional y la información del atributo no debe exceder el <code>tag_attribute_total_size</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Podemos actualizar la información de la etiqueta después de crearla de la siguiente manera:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Cambiar el nombre de la etiqueta/clave de atributo</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>ALTER timeseries root.turbine.d1.s1 RENAME tag1 TO newTag1</code></pre>
</div>
</div>
</li>
<li>
<p>Restablecer el valor de la etiqueta/atributo</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>ALTER timeseries root.turbine.d1.s1 SET newTag1=newV1, attr1=newV1</code></pre>
</div>
</div>
</li>
<li>
<p>Eliminar la etiqueta/atributo existente</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>ALTER timeseries root.turbine.d1.s1 DROP tag1, tag2</code></pre>
</div>
</div>
</li>
<li>
<p>Agregar nuevas etiquetas</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>ALTER timeseries root.turbine.d1.s1 ADD TAGS tag3=v3, tag4=v4</code></pre>
</div>
</div>
</li>
<li>
<p>Agregar nuevos atributos</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>ALTER timeseries root.turbine.d1.s1 ADD ATTRIBUTES attr3=v3, attr4=v4</code></pre>
</div>
</div>
</li>
<li>
<p>Insertar alias, etiquetas y atributos</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Agregue un alias o un nuevo valor-clave si el alias o la clave no existe; de ​​lo contrario, actualice el anterior con un nuevo valor.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>ALTER timeseries root.turbine.d1.s1 UPSERT ALIAS=newAlias TAGS(tag3=v3, tag4=v4) ATTRIBUTES(attr3=v3, attr4=v4)</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gestión_de_nodos"><a class="anchor" href="#_gestión_de_nodos"></a>Gestión de Nodos</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_mostrar_rutas_secundarias"><a class="anchor" href="#_mostrar_rutas_secundarias"></a>Mostrar Rutas Secundarias</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>SHOW CHILD PATHS prefixPath</code></pre>
</div>
</div>
<div class="paragraph">
<p>Devuelve todas las rutas secundarias del prefixPath, el prefixPath podría contener *.</p>
</div>
<div class="paragraph">
<p>Ejemplo:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Devolver las rutas secundarios de root.ln: muestra las rutas secundarias root.ln</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>+------------+
| child paths|
+------------+
|root.ln.wf01|
|root.ln.wf02|
+------------+
Total line number = 2
It costs 0.002s</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Obtener todas las rutas en forma de root.xx.xx.xx ： mostrar las rutas secundarias root.xx.xx</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_mostrar_nodos_secundarios"><a class="anchor" href="#_mostrar_nodos_secundarios"></a>Mostrar Nodos Secundarios</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>SHOW CHILD NODES prefixPath</code></pre>
</div>
</div>
<div class="paragraph">
<p>Devuelve todos los nodos secundarios de prefixPath.</p>
</div>
<div class="paragraph">
<p>Ejemplo:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Devolver los nodos secundarios de la raíz: mostrar la raíz de los nodos secundarios</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>+------------+
| child nodes|
+------------+
|          ln|
+------------+</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Devolver los nodos secundarios de root.vehicle ： mostrar los nodos secundarios root.ln</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>+------------+
| child nodes|
+------------+
|        wf01|
|        wf02|
+------------+</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contar_nodos"><a class="anchor" href="#_contar_nodos"></a>Contar Nodos</h3>
<div class="paragraph">
<p>IoTDB puede usar <code>COUNT NODES &lt;PrefixPath&gt; LEVEL=&lt;INTEGER&gt;</code> para contar el número de nodos en el nivel dado en el árbol de metadatos actual. Esto podría usarse para consultar el número de dispositivos. El uso es el siguiente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB &gt; COUNT NODES root LEVEL=2
IoTDB &gt; COUNT NODES root.ln LEVEL=2
IoTDB &gt; COUNT NODES root.ln.wf01 LEVEL=3</code></pre>
</div>
</div>
<div class="paragraph">
<p>En cuanto al ejemplo y el árbol de metadatos mencionados anteriormente, puede obtener los siguientes resultados:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>+-----+
|count|
+-----+
|    4|
+-----+
Total line number = 1
It costs 0.003s

+-----+
|count|
+-----+
|    2|
+-----+
Total line number = 1
It costs 0.002s

+-----+
|count|
+-----+
|    1|
+-----+
Total line number = 1
It costs 0.002s</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>La ruta de las series temporales es solo una condición de filtro, que no tiene relación con la definición de nivel. <code>PrefixPath</code> podría contener <code><strong></code>, pero todos los nodos después de <code></strong></code> serían ignorados. Solo la ruta de prefijo antes de <code>*</code> es válida.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_mostrar_dispositivos"><a class="anchor" href="#_mostrar_dispositivos"></a>Mostrar Dispositivos</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SHOW DEVICES prefixPath? (WITH STORAGE GROUP)? limitClause? #showDevices</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Similar a <code>Show Timeseries</code>, IoTDB también admite dos formas de ver dispositivos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>La declaración <code>SHOW DEVICES</code> presenta la información de todos los dispositivos, que es igual a <code>SHOW DEVICES root</code>.</p>
</li>
<li>
<p>La declaración <code>SHOW DEVICES &lt;PrefixPath&gt;</code> especifica <code>PrefixPath</code> y devuelve la información de los dispositivos en el nivel dado.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La declaración SQL es la siguiente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB&gt; show devices
IoTDB&gt; show devices root.ln</code></pre>
</div>
</div>
<div class="paragraph">
<p>Puede obtener resultados a continuación:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>+-------------------+
|            devices|
+-------------------+
|  root.ln.wf01.wt01|
|  root.ln.wf02.wt02|
|root.sgcc.wf03.wt01|
|    root.turbine.d1|
+-------------------+
Total line number = 4
It costs 0.002s

+-----------------+
|          devices|
+-----------------+
|root.ln.wf01.wt01|
|root.ln.wf02.wt02|
+-----------------+
Total line number = 2
It costs 0.001s</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para ver la información de los dispositivos con el grupo de almacenamiento, podemos usar la declaración <code>SHOW DEVICES WITH STORAGE GROUP</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>La declaración <code>SHOW DEVICES WITH STORAGE GROUP</code> presenta la información de todos los dispositivos con su grupo de almacenamiento.</p>
</li>
<li>
<p>La instrucción <code>SHOW DEVICES &lt;PrefixPath&gt; WITH STORAGE GROUP</code> especifica <code>PrefixPath</code> y devuelve la información de los dispositivos en el nivel dado con la información de su grupo de almacenamiento.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La declaración SQL es la siguiente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB&gt; show devices with storage group
IoTDB&gt; show devices root.ln with storage group</code></pre>
</div>
</div>
<div class="paragraph">
<p>Puede obtener resultados a continuación:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>+-------------------+-------------+
|            devices|storage group|
+-------------------+-------------+
|  root.ln.wf01.wt01|      root.ln|
|  root.ln.wf02.wt02|      root.ln|
|root.sgcc.wf03.wt01|    root.sgcc|
|    root.turbine.d1| root.turbine|
+-------------------+-------------+
Total line number = 4
It costs 0.003s

+-----------------+-------------+
|          devices|storage group|
+-----------------+-------------+
|root.ln.wf01.wt01|      root.ln|
|root.ln.wf02.wt02|      root.ln|
+-----------------+-------------+
Total line number = 2
It costs 0.001s</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ttl"><a class="anchor" href="#_ttl"></a>TTL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>IoTDB admite la configuración TTL de nivel de almacenamiento, lo que significa que puede eliminar datos antiguos de forma automática y periódica. El beneficio de usar TTL es que, con suerte, puede controlar el uso total del espacio en disco y evitar que la máquina se quede sin discos. Además, el rendimiento de la consulta puede disminuir a medida que aumenta el número total de archivos y el uso de memoria también aumenta a medida que hay más archivos. La eliminación oportuna de estos archivos ayuda a mantener un alto nivel de rendimiento de consultas y reduce el uso de memoria.</p>
</div>
<div class="sect2">
<h3 id="_configurar_ttl"><a class="anchor" href="#_configurar_ttl"></a>Configurar TTL</h3>
<div class="paragraph">
<p>La declaración SQL para configurar TTL es la siguiente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB&gt; set ttl to root.ln 3600000</code></pre>
</div>
</div>
<div class="paragraph">
<p>Este ejemplo significa que para los datos en <code>root.ln</code>, solo quedará el de la última hora, el más antiguo se elimina o se hace invisible.</p>
</div>
</div>
<div class="sect2">
<h3 id="_desarmar_ttl"><a class="anchor" href="#_desarmar_ttl"></a>Desarmar TTL</h3>
<div class="paragraph">
<p>Para desarmar TTL, podemos usar la siguiente instrucción SQL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB&gt; unset ttl to root.ln</code></pre>
</div>
</div>
<div class="paragraph">
<p>Después de desarmar TTL, todos los datos serán aceptados en <code>root.ln</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_mostrar_ttl"><a class="anchor" href="#_mostrar_ttl"></a>Mostrar TTL</h3>
<div class="paragraph">
<p>Para mostrar TTL, podemos usar la siguiente declaración SQL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IoTDB&gt; SHOW ALL TTL
IoTDB&gt; SHOW TTL ON StorageGroupNames</code></pre>
</div>
</div>
<div class="paragraph">
<p>El ejemplo SHOW ALL TTL proporciona el TTL para todos los grupos de almacenamiento. El ejemplo SHOW TTL ON root.group1, root.group2, root.group3 muestra el TTL para los tres grupos de almacenamiento especificados. Nota: el TTL para los grupos de almacenamiento que no tienen un TTL configurado se mostrará como nulo.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Esta página fue hecha usando la interfaz predeterminada de Antora.</p>
  <p>El código de esta interfaz está licenciado bajo los términos de la licencia MPL-2.0.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
